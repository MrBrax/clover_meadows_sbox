@using Clover.Carriable
@using Clover.Components
@using Clover.Player
@using Clover.WorldBuilder
@using Sandbox;
@using Sandbox.UI;
@using Clover.Ui;
@inherits PanelComponent
@namespace Clover

<root>
	@if ( PlayerCharacter.Local.IsValid() )
	{
		<div class="is-saving" @ref=" IsSavingPanel">
			<i class="icon">save</i>
		</div>

		<div class="status @( ShouldShowUi ? "active" : "" )">
			<div class="weather">
				<Image Texture=@NodeManager.WeatherManager.GetWeatherIcon()/>
			</div>
			<div class="time">@TimeManager.Time.ToString( "HH:mm" )</div>
		</div>

		<div class="cutscene-bars @( PlayerCharacter.Local.InCutscene ? "active" : "" )">
			<div class="bar top"></div>
			<div class="bar bottom"></div>
		</div>

		@if ( ShowInputs )
		{
			<div class="inputs @( ShouldShowUi ? "active" : "" )">
				@foreach ( var input in GetCurrentInputs() )
				{
					<div class="input-entry">
						<Image Texture=@Input.GetGlyph( input.Action, InputGlyphSize.Small, GlyphStyle.Dark )/>
						<div class="input-name">@input.Name</div>
					</div>
				}
			</div>
		}

		@if ( PlayerCharacter.Local.Equips.HasEquippedItem<Paintbrush>( Equips.EquipSlot.Tool ) )
		{
			<PaintbrushUi/>
		}
	}
	else if ( string.IsNullOrEmpty( PlayerCharacter.SpawnPlayerId ) )
	{
		<PlayerSelect/>
	}
</root>
